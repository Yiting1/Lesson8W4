<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Prediction Assignment</title>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type="text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Prediction Assignment</h1>

</div>


<div id="getting-data" class="section level1">
<h1>Getting data</h1>
<p>The raw training data has 19622 rows of observations and 158 features (predictors). Column X is unusable row number. While the testing data has 20 rows and the same 158 features. There is one column of target outcome named classe.</p>
<pre><code># URL of the training and testing data
train.url =&quot;https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv&quot;
test.url = &quot;https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv&quot;
# file names
train.name = &quot;./data/pml-training.csv&quot;
test.name = &quot;./data/pml-testing.csv&quot;
# if directory does not exist, create new
if (!file.exists(&quot;./data&quot;)) {
  dir.create(&quot;./data&quot;)
}
# if files does not exist, download the files
if (!file.exists(train.name)) {
  download.file(train.url, destfile=train.name, method=&quot;curl&quot;)
}
if (!file.exists(test.name)) {
  download.file(test.url, destfile=test.name, method=&quot;curl&quot;)
}
# load the CSV files as data.frame 
data &lt;- read.csv(&quot;D:/Users/ytwangzd/Desktop/pml-training.csv&quot;)
test &lt;- read.csv(&quot;D:/Users/ytwangzd/Desktop/pml-testing.csv&quot;)
</code></pre>
</div>
<div id="preprocessing" class="section level1">
<h1>Preprocessing</h1>
<p>Check for features?î¨ƒ variance</p>
<p>Based on the principal component analysis PCA, it is important that features have maximum variance for maximum uniqueness, so that each feature is as distant as possible (as orthogonal as possible) from the other features.</p>
<pre><code># check for zero variance
zero.var = nearZeroVar(train, saveMetrics=TRUE)
zero.var</code></pre>
<p>There is no features without variability (all has enough variance). So there is no feature to be removed further.</p>
<p>Plot of relationship between features and outcome</p>
<p>Plot the relationship between features and outcome. From the plot below, each features has relatively the same distribution among the 5 outcome levels (A, B, C, D, E).</p>
<pre><code>featurePlot(train, outcome.org, &quot;strip&quot;)</code></pre>
</div>
<div id="plot-of-correlation-matrix" class="section level1">
<h1>Plot of correlation matrix</h1>
<p>Plot a correlation matrix between features. A good set of features is when they are highly uncorrelated (orthogonal) each others. The plot below shows average of correlation is not too high, so I choose to not perform further PCA preprocessing.</p>
<pre><code>corrplot.mixed(cor(train), lower=&quot;circle&quot;, upper=&quot;color&quot;, 
               tl.pos=&quot;lt&quot;, diag=&quot;n&quot;, order=&quot;hclust&quot;, hclust.method=&quot;complete&quot;)</code></pre>
</div>
<div id="fit-model-and-do-10-fold-cross-validation" class="section level1">
<h1>Fit Model and Do 10-fold cross validation</h1>
<pre><code>library(caret)

fitControl &lt;- trainControl(
  method = &quot;repeatedcv&quot;,
  number = 10,
  repeats = 3,
  classProbs = TRUE
)

set.seed(1)
nbfit &lt;- train(classe~., data = data,
                method = &quot;nb&quot;,   
                trControl = fitControl,
                na.action = na.pass
)</code></pre>
</div>
<div id="prediction-and-do-confusionmatrix" class="section level1">
<h1>Prediction and Do confusionMatrix</h1>
<pre><code>pred &lt;- predict(nbfit,test,type=&quot;raw&quot;)
confusionMatrix(pred,data$classe)</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
